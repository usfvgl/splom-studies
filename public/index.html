<!DOCTYPE html>

<meta charset="utf-8">
<title>Survey</title>

<!-- Calls to /scripts are redirected to /node_modules/ on the server -->
<script src="/scripts/d3/d3.min.js"></script>
<script src="experimentr.js"></script>
<script language="javascript" type="text/javascript" src="multi_scatter.js"></script>

<link rel="stylesheet" type="text/css" href="css/main.css" />

<body></body>

<script>
/*
 * Compute a random integer i within a given range,
 * where lower <= i < upper
*/
function getRandomInteger(lower, upper) {
	console.assert(arguments.length === 2, "getRandomInteger() requires lower and upper parameters.");
	return Math.floor(Math.random() * (upper - lower)) + lower;
}

/*
 * Put all modules involved in experiment between initial consent module and
 * ending debrief module.
 */
var modules = [
  'modules/consent/',
  'modules/section1-template/',
  'modules/section2-template/',
  'modules/debrief/'
];

// Randomize order of test modules, keeping consent as first and debrief as last
var numModules = modules.length;
var randomIndex;
for (var i = 1; i < numModules - 2; i++) {
	randomIndex = getRandomInteger(i, numModules - 1);
	var temp = modules[i];
	modules[i] = modules[randomIndex];
	modules[randomIndex] = temp;
}

// Add randomized module order to session tracking;
var storeInfo = {};
storeInfo['module_order'] = modules.join().replace(/modules\//g,"");
experimentr.addData(storeInfo);

experimentr.sequence(modules).start();

</script>
